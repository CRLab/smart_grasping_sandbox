<robot xmlns:xacro="http://ros.org/wiki/xacro">
  <xacro:include filename="$(find fh_description)/common/optoforce.xacro" />

  <xacro:macro name="macro_0x02000101" params="part_id hand_id transmission *origin">
    <link name="${hand_id}_${part_id}_base_link">
      <inertial>
        <origin xyz="-0.00016975101978813 0.00197421910589327 0.0561457825889687" rpy="0 0 0" />
        <mass value="0.206184327436554" />
        <inertia ixx="0.000196208681085273" ixy="7.25965267883658E-08" ixz="-1.42989296818671E-06"
                 iyy="0.00022500240306659" iyz="-8.62726850629812E-06" izz="7.34501911009421E-05" />
      </inertial>
      <xacro:mesh_visual file_name="base_link.stl">
        <origin xyz="0 0 0" rpy="0 0 0" />
        <xacro:light_grey/>
      </xacro:mesh_visual>
      <xacro:mesh_collision file_name="base_link.stl">
        <origin xyz="0 0 0" rpy="0 0 0" />
        <xacro:light_grey/>
      </xacro:mesh_collision>
    </link>

    <link name="${hand_id}_${part_id}_link_1">
      <inertial>
        <origin xyz="-0.000237426002648366 -0.000311474464416824 0.02717870175844" rpy="0 0 0" />
        <mass value="0.148439137620102" />
        <inertia ixx="7.87590932011867E-05" ixy="-2.09812809718026E-08" ixz="-4.7018912298647E-07"
                 iyy="9.21180950643254E-05" iyz="1.02291530412464E-06" izz="4.38404666397581E-05" />
      </inertial>
      <xacro:mesh_visual file_name="prox.stl">
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <xacro:light_grey/>
      </xacro:mesh_visual>
      <xacro:mesh_collision file_name="prox.stl">
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <xacro:light_grey/>
      </xacro:mesh_collision>
    </link>

    <link name="${hand_id}_${part_id}_link_2">
      <inertial>
        <origin xyz="0.000688458734451483 -0.00121669160147178 0.0179379664791534" rpy="0 0 0" />
        <mass value="0.0468986964963515" />
        <inertia ixx="1.66577929038936E-05" ixy="1.91370536767985E-09" ixz="-7.90963473136566E-07"
                 iyy="1.65880289089031E-05" iyz="-2.10962265976158E-06" izz="5.79382496615135E-06" />
      </inertial>
      <xacro:mesh_visual file_name="dist.stl">
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <xacro:light_grey/>
      </xacro:mesh_visual>
      <xacro:mesh_collision file_name="dist.stl">
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <xacro:light_grey/>
      </xacro:mesh_collision>
    </link>

    <joint name="${hand_id}_${part_id}Base" type="fixed">
      <origin xyz="0 0 0" rpy="0 0 0" />
      <parent link="${hand_id}_insert_${part_id}"/>
      <child link="${hand_id}_${part_id}_base_link"/>
    </joint>

    <joint name="${hand_id}_${part_id}J1" type="revolute">
      <origin xyz="0 0 0.096" rpy="0 0 0" />
      <parent link="${hand_id}_${part_id}_base_link"/>
      <child link="${hand_id}_${part_id}_link_1"/>
      <axis xyz="1 0 0" />
      <limit lower="-${pi/2}" upper="1.0472" effort="2" velocity="1.0" />
      <dynamics damping="0.1"/>
    </joint>

    <joint name="${hand_id}_${part_id}J2" type="revolute">
      <origin xyz="0 0 0.06" rpy="0 0 0" />
      <axis xyz="1 0 0" />
      <parent link="${hand_id}_${part_id}_link_1"/>
      <child link="${hand_id}_${part_id}_link_2"/>
      <limit lower="-1.04716" upper="1.57075" effort="2" velocity="1.0" />
      <dynamics damping="0.01"/>
    </joint>

    <xacro:if value="${transmission}">
      <xacro:transmission_ joint_name="${hand_id}_${part_id}J1" interface="EffortJointInterface"/>
      <xacro:transmission_ joint_name="${hand_id}_${part_id}J2" interface="EffortJointInterface"/>
    </xacro:if>

      <!-- finger tip -->
    <xacro:optoforce_d18 part_id="${hand_id}_${part_id}"/>
    <joint name="${hand_id}_${part_id}_tip" type="fixed">
      <parent link="${hand_id}_${part_id}_link_2"/>
      <child link="${hand_id}_${part_id}_tip"/>
    </joint>

  </xacro:macro>
</robot>
